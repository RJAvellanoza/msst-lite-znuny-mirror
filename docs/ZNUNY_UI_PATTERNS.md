# Znuny UI Patterns Reference

## Overall Form Structure
```html
<div class="MainBox ARIARoleMain FormScreen">
    <h1>[% Translate("Title") | html %]</h1>
    <p class="AsteriskExplanation">[% Translate("All fields marked with an asterisk (*) are mandatory.") | html %]</p>
    
    <div class="ContentColumn">
        <form action="[% Env("CGIHandle") %]" method="post" enctype="multipart/form-data" class="Validate PreventMultipleSubmits">
            <fieldset class="TableLike">
                <!-- Form fields here -->
            </fieldset>
        </form>
    </div>
</div>
```

## Field Layout Classes
- **Label**: 30% width, right-aligned, grey color (#929292)
- **Field**: 70% width with left margin of 30%
- **Row wrapper**: Used for dynamic fields

### Standard Field Pattern
```html
<!-- Standard field -->
<label class="Mandatory" for="FieldID"><span class="Marker">*</span> [% Translate("Label") | html %]:</label>
<div class="Field">
    <input type="text" name="FieldName" id="FieldID" class="W75pc Validate_Required" />
    <div id="FieldIDError" class="TooltipErrorMessage"><p>[% Translate("This field is required.") | html %]</p></div>
</div>
<div class="Clear"></div>
```

### Dynamic Field Pattern
```html
<!-- Dynamic field with Row wrapper -->
<div class="Row Row_DynamicField_[% Data.Name | html %]">
    [% Data.Label %]
    <div class="Field">
        [% Data.Field %]
    </div>
    <div class="Clear"></div>
</div>
```

## CSS Classes for Form Elements

### Input Field Widths
- `W75pc` - 75% width (common for subject/title fields)
- `W50pc` - 50% width
- `W25pc` - 25% width

### Validation Classes
- `Validate` - Enables validation
- `Validate_Required` - Makes field required
- `PreventMultipleSubmits` - Prevents double form submission

### Error Handling
- `TooltipErrorMessage` - Container for error messages
- Server-side errors use `[FieldName]ServerError` ID

## Large Text Areas (Rich Text)
```html
<label class="Mandatory" for="RichText"><span class="Marker">*</span> [% Translate("Text") | html %]:</label>
<div id="RichTextField" class="RichTextField">
    <textarea id="RichText" class="RichText Validate_Required" name="Body" rows="15" cols="[% Config("Ticket::Frontend::TextAreaNote") | html %]">[% Data.Body | html %]</textarea>
    <div id="RichTextError" class="TooltipErrorMessage">
        <p>[% Translate("This field is required.") | html %]</p>
    </div>
</div>
<div class="Clear"></div>
```

## Buttons
```html
<div class="Field SpacingTop">
    <button class="Primary CallForAction" type="submit">
        <span><i class="fa fa-check-square-o"></i> [% Translate("Create") | html %]</span>
    </button>
</div>
```

### Button Classes
- `Primary CallForAction` - Primary action button
- `CallForAction` - Secondary action button
- Font Awesome icons in `<i>` tags

## Two-Column Layouts
For forms with a sidebar (like customer info):
```html
<div class="LayoutFixedSidebar SidebarLast">
    <div class="SidebarColumn">
        <!-- Sidebar content (widgets) -->
    </div>
    <div class="ContentColumn">
        <!-- Main form content -->
    </div>
</div>
```

Alternative sidebar first:
```html
<div class="LayoutFixedSidebar SidebarFirst">
    <div class="SidebarColumn">
        <!-- Sidebar content -->
    </div>
    <div class="ContentColumn">
        <!-- Main content -->
    </div>
</div>
```

## Widget Structure (for sidebars/sections)
```html
<div class="WidgetSimple">
    <div class="Header">
        <h2>[% Translate("Section Title") | html %]</h2>
    </div>
    <div class="Content">
        <!-- Widget content -->
    </div>
</div>
```

### Collapsible Widget
```html
<div class="WidgetSimple Collapsed">
    <div class="Header">
        <div class="WidgetAction Toggle">
            <a href="#" title="[% Translate("Show or hide the content") | html %]">
                <i class="fa fa-caret-right"></i>
                <i class="fa fa-caret-down"></i>
            </a>
        </div>
        <h2>[% Translate("Title") | html %]</h2>
    </div>
    <div class="Content">
        <!-- Content -->
    </div>
</div>
```

## Field Grouping/Sections
While Znuny doesn't use explicit tabs in most forms, they group related fields using:
- Clear semantic labeling
- Visual spacing (`SpacingTop` class)
- Logical field ordering
- Dynamic field sections

## Select/Dropdown Fields
```html
<label for="TypeID">[% Translate("Type") | html %]:</label>
<div class="Field">
    [% Data.TypeStrg %]
</div>
<div class="Clear"></div>
```

Note: `[% Data.TypeStrg %]` contains the full `<select>` element generated by Perl

## Key CSS Files
- `/var/httpd/htdocs/skins/Agent/default/css/Core.Form.css` - Form-specific styles
- `/var/httpd/htdocs/skins/Agent/default/css/Core.Default.css` - Base styles
- `/var/httpd/htdocs/skins/Agent/default/css/Core.Widget.css` - Widget styles

## Important Notes

1. **Always use `fieldset.TableLike`** for consistent field alignment
2. **Apply proper field widths** (`W75pc` for title/subject fields)
3. **Use standard validation classes** (`Validate_Required`)
4. **Follow the label/field/clear pattern** for each form element
5. **Consider using WidgetSimple** for grouping related fields instead of custom tabs
6. **Use RichTextField** wrapper for large text areas
7. **Apply standard button classes** (`Primary CallForAction`)
8. **Use Clear divs** after each field for proper layout clearing
9. **Error messages** go in `TooltipErrorMessage` divs with specific IDs
10. **Mandatory fields** use `class="Mandatory"` on label with `<span class="Marker">*</span>`

## Form Class Structure
- `MainBox` - Main container
- `ARIARoleMain` - ARIA accessibility
- `FormScreen` - Form-specific styling
- `ContentColumn` - Main content area
- `Validate` - Enables form validation
- `PreventMultipleSubmits` - Prevents double submission
- `TableLike` - Field alignment (label/field pattern)